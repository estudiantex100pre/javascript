<!DOCTYPE html>
<html>
<head>
	<title>api file</title>
	<style type="text/css">

		body{
			padding-left: 3em ;
		/*	width: 600px ; */
			border:1px solid #ccc;
		}
		img{
			max-width: 100% ;
		}
	</style>
</head>
<body>
	<input type="file" name="file" id="file" multiple><br>
	<div id="imagen"></div>
	<div id="progreso"></div>
	<!--p id="text"></p>
	<img id="img"-->
	<script type="text/javascript">
		const fileInput = document.getElementById('file') ;
		const img = document.getElementById("img") ;
		const text = document.getElementById("text") ;
		const imagen = document.getElementById("imagen") ;

	/*	fileInput.addEventListener("change", (e) =>{
			const file = e.target.files[0] ;
			const fileReader = new FileReader() ;
			fileReader.readAsText(file) ;
			fileReader.addEventListener("load", (e)=>{
				text.textContent = e.target.result ;
			})
		}) 
	*/
		fileInput.addEventListener("change", (e) =>{
			const file = e.target.files ;
			const fragment = document.createDocumentFragment() ;
			console.log(file.name)
			for(var i=0 ; i<file.length ; i++){
				const fileReader = new FileReader() ;
				const img = document.createElement("IMG") ;
				fileReader.readAsDataURL(file[i]) ;
				fileReader.addEventListener("load", (e)=>{
					img.setAttribute("src", e.target.result) ;
				//	fragment.appendChild(img) ;
				})
				fragment.appendChild(img) ; //raro cuando lo ponogo en el evento load
			}
			imagen.appendChild(fragment) ;
		})
	</script>
</body>
</html>